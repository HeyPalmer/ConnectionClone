(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{96:function(e,t,n){Promise.resolve().then(n.bind(n,6016))},6016:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var s=n(3827),r=n(8592),o=n(8792),l=n(7907),i=n(4090),a=n(8009),c=n(1096),u=n(2944),f=n(3109),d=n(1657);function h(e){let{name:t,words:n,color:r}=e;return(0,s.jsxs)("div",{className:"".concat(r," flex aspect-[4.25/1] flex-col justify-center rounded-md py-4 text-center uppercase leading-tight sm:aspect-auto"),children:[(0,s.jsx)("p",{className:"font-semibold",children:t}),(0,s.jsx)("p",{children:n.join(", ")})]})}function g(e){let{selected:t,...n}=e;return(0,s.jsx)("button",{className:"".concat(t?"bg-stone-600 text-stone-50":"bg-stone-200"," aspect-square break-words rounded-md p-2 text-center font-semibold uppercase leading-none transition active:scale-95 sm:aspect-auto sm:py-6 sm:text-base"),...n})}function p(){let e=(0,l.useSearchParams)(),[t]=(0,r.u)(),[n,p]=(0,r.u)(),[m,x]=(0,i.useState)(),[b,j]=(0,i.useState)([]),[w,y]=(0,i.useState)([]),[N,k]=(0,i.useState)([]);if((0,i.useEffect)(()=>{if(e.has("options"))try{let t=JSON.parse(atob(e.get("options"))),n=f.G.parse(t);console.info("setting game options from URL",n);for(let e=0;e<n.words.length;e++)n.words[e].sort(d.TZ);console.info("setting game options from URL",n),x(n),y((0,u.Rl)(n,N))}catch(e){console.error("could not parse game options from URL")}},[]),void 0===m)return(0,s.jsx)("main",{});let v=4-(0,u.t3)(m,N),L=0===w.length,C=0===v,S=b.length<2||N.some(e=>(0,d.pt)(e,b));return(0,s.jsxs)("main",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.x7,{containerStyle:{position:"relative",inset:0,flexShrink:0},toastOptions:{duration:3e3,className:"!shrink-0 !rounded-md !bg-stone-900 !p-2 !text-stone-50 !shadow-md"}}),(0,s.jsxs)("h2",{children:[(0,s.jsx)("span",{className:"text-2xl font-semibold",children:m.title.toUpperCase()})," ","by ",m.author.toUpperCase()]}),(0,s.jsxs)("p",{className:"text-stone-500",children:[(0,s.jsx)(o.default,{href:"/new?options=".concat(e.get("options")),className:"underline",children:"remix this game"})," ","or"," ",(0,s.jsx)(o.default,{href:"/new",className:"underline",children:"create your own"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-4",children:[N.map(e=>(0,u.Y3)(m,e)?(0,s.jsx)(h,{name:m.names[(0,u.Lq)(m,e[0])],words:m.words[(0,u.Lq)(m,e[0])],color:u.O9[(0,u.Lq)(m,e[0])]},(0,u.Lq)(m,e[0])):void 0),w.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:gap-4",ref:n,children:w.map(e=>(0,s.jsx)(g,{selected:b.includes(e),onClick:()=>{b.includes(e)?j(b.filter(t=>t!==e)):b.length<4&&j([...b,e])},children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 place-self-center sm:place-self-auto",ref:t,children:[(0,s.jsx)("p",{children:"Remaining mistakes:"}),(0,d.w6)(v).map((e,t)=>(0,s.jsx)("span",{className:"h-4 w-4 rounded-full bg-stone-600"},t))]}),L||C?L?(0,s.jsx)("p",{children:"You won, congrats!"}):C?(0,s.jsx)("p",{children:"You lost, refresh to try again!"}):null:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 place-self-center sm:place-self-auto",children:[(0,s.jsx)(c.i,{onClick:()=>y((0,u.Rl)(m,N)),children:"Shuffle"}),(0,s.jsx)(c.i,{disabled:0===b.length,onClick:()=>j([]),children:"Deselect all"}),(0,s.jsx)(c.i,{variant:S?void 0:"filled",disabled:S,onClick:async()=>{if(!0===(0,u.Y3)(m,b)){console.log("HELP ME");let e=b.toSorted(d.TZ);for(let t=0;t<b.length;t++)y(n=>{let s=n.indexOf(e[t]);return(0,d.QP)(n,t,s)});p(!0),await new Promise(e=>setTimeout(e,500)),k([...N,b]),j([]),y(e=>e.filter(e=>!b.includes(e))),p(!1)}else(0,u.f4)(m,b)===m.names.length-1&&(0,a.ZP)("One away..."),k([...N,b]),j([])},children:"Submit"})]})]})}},1096:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var s=n(3827);function r(e){let{disabled:t,variant:n,...r}=e;return(0,s.jsx)("button",{...r,className:"rounded-full border border-black px-4 py-2\n          ".concat(t?"opacity-40":"","\n          ").concat("filled"===n?"bg-black text-white":""),disabled:t})}},3109:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var s=n(3391);let r=s.Ry({words:s.Z_().array().array(),names:s.Z_().array(),author:s.Z_(),title:s.Z_()})},2944:function(e,t,n){"use strict";n.d(t,{Lq:function(){return r},O9:function(){return s},Rl:function(){return a},Y3:function(){return o},f4:function(){return l},t3:function(){return i}});let s=["bg-nyt-yellow","bg-nyt-green","bg-nyt-blue","bg-nyt-purple","bg-nyt-lilac","bg-nyt-light","bg-nyt-dark"];function r(e,t){for(let n=0;n<e.words.length;n++)if(e.words[n].includes(t))return n;return -1}function o(e,t){let n=r(e,t[0]);for(let s=1;s<t.length;s++)if(r(e,t[s])!==n)return!1;return e.words[n].length==t.length}function l(e,t){let n=[0,0,0,0];for(let s=0;s<t.length;s++)n[r(e,t[s])]++;let s=0;for(let e=0;e<t.length;e++)n[e]>s&&(s=n[e]);return s}function i(e,t){let n=0;for(let s=0;s<t.length;s++)!1===o(e,t[s])&&n++;return n}function a(e,t){let n=function(e,t){let n=[],s=t.length;0===s&&(s=e.names.length);for(let e=0;e<s;e++)n.push(!1);for(let s=0;s<t.length;s++)o(e,t[s])&&(n[r(e,t[s][0])]=!0);if(console.log("Checking Guess"),console.log(t),t.length>0){console.log("GLength"+t.length);let s=r(e,t[0][0]),o=e.words[s].length;console.log("NUM: "+o),o!=n.length&&n.push(!1)}return console.log("Guess Done"),n}(e,t),s=[];for(let t=0;t<e.words.length;t++)!1===n[t]&&e.words[t].forEach(e=>s.push(e));return s.sort(()=>Math.random()-.5),s}},1657:function(e,t,n){"use strict";function s(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}function r(e){return Array.from({length:e},(e,t)=>t)}function o(e,t,n){let s=[];for(let r=0;r<e.length;r++)r===t?s[r]=e[n]:r===n?s[r]=e[t]:s[r]=e[r];return s}function l(e,t){return e.sort().join(",")===t.sort().join(",")}n.d(t,{QP:function(){return o},TZ:function(){return s},pt:function(){return l},w6:function(){return r}})}},function(e){e.O(0,[250,795,545,971,69,744],function(){return e(e.s=96)}),_N_E=e.O()}]);